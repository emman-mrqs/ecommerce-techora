<header>
  <link rel="stylesheet" href="/css/modal.css">
</header>


<!-- ../partials/modal.ejs -->
<div id="customModal" class="modal-overlay" style="display: none;">
  <div class="modal-card">
    <div class="modal-header">
      <h3 class="modal-title">Notice</h3>
      <button class="modal-close" onclick="closeModal()">&times;</button>
    </div>
    <div class="modal-body">
      <p class="modal-message"><%= typeof message !== 'undefined' && message ? message : ' ' %></p>
    </div>
    <div class="modal-footer">
      <button class="modal-button" onclick="closeModal()">Okay</button>
    </div>
  </div>
</div>

<!-- Modal JS  -->
<script>
  let redirectUrl = null; // store redirect if provided

  function openModal(message, redirect = null) {
    const modal = document.getElementById('customModal');
    if (!modal) return;

    modal.querySelector('.modal-message').textContent = message || 'Default message here.';
    modal.style.display = 'flex';

    redirectUrl = redirect; // save redirect URL if any
  }

  function closeModal() {
    const modal = document.getElementById('customModal');
    if (!modal) return;

    modal.style.display = 'none';

    // if redirect is set, go there after modal closes
    if (redirectUrl) {
      window.location.href = redirectUrl;
    }
  }
</script>
