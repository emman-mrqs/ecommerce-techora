:root{
  --threads-w: 300px;      /* left message list width (desktop) */
  --min-chat-w: 420px;      /* minimum readable chat width */
}

/* Floating FAB */
.chat-fab{
  position: fixed; right: 22px; bottom: 22px; width: 54px; height: 54px;
  display:grid; place-items:center; z-index: 1045; background:#0a0a0a; border:none;
}
.chat-fab i{font-size:1.25rem}

/* NEW: Floating Chat Window */
.techora-chat-window {
  position: fixed;
  bottom: 90px; /* Position above the FAB */
  right: 22px;
  width: clamp(360px, 90vw, calc(var(--threads-w) + var(--min-chat-w) + 2px));
  height: clamp(500px, 80vh, 700px);
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.15);
  z-index: 1050;
  overflow: hidden;
  display: none; /* Hidden by default */
  flex-direction: column;
  transform-origin: bottom right;
  opacity: 0;
  transform: scale(0.95);
  transition: transform 0.2s ease-out, opacity 0.2s ease-out;
}
.techora-chat-window.open {
  display: flex;
  opacity: 1;
  transform: scale(1);
}

/* Base layout inside the window */
.techora-chat-layout{
  height: 100%;
  width: 100%;
  min-width: 0;
  display: flex;
  background: #fff;
  overflow: hidden;
  gap: 0;
}

/* LEFT (Threads) */
.chat-threads{
  flex: 0 0 var(--threads-w);
  width: var(--threads-w);
  min-width: var(--threads-w);
  max-width: var(--threads-w);
  border-right:1px solid #e6e6e6;
  display:flex; flex-direction:column;
  background:#fff;
}
.threads-head{ padding:12px 14px; border-bottom:1px solid #f0f0f0;}
.threads-head .title{ font-weight:700; color:#0a0a0a}
.threads-head .subtitle{ color:#7a7a7a; font-size:.9rem}
.threads-scroll{ flex:1 1 auto; overflow-y:auto; padding-bottom:8px; min-width:0; }
.threads-scroll::-webkit-scrollbar{width:8px}
.threads-scroll::-webkit-scrollbar-thumb{background:#d4d4d4;border-radius:8px}
.thread{ display:flex; gap:10px; padding:10px 12px; border-left:3px solid transparent; cursor:pointer;}
.thread:hover{ background:#fafafa }
.thread.active{ background:#e8f0ff; border-left-color:#2d6cdf; }
.thread-avatar{ width:36px;height:36px;border-radius:50%;display:grid;place-items:center;font-weight:700; background:#111;color:#fff;font-size:.9rem; }
.thread-avatar.soft{ background:#eef0f3; color:#111; }
.thread-body{flex:1 1 auto; min-width:0;}
.thread-body .top{display:flex; align-items:center; gap:6px; white-space:nowrap}
.thread-body .name{font-weight:600; color:#0a0a0a}
.thread-body .ago{margin-left:auto; font-size:.78rem; color:#8a8a8a}
.thread-body .preview{font-size:.88rem; color:#6b6b6b; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}
.dot{display:inline-block; width:8px;height:8px;border-radius:50%; background:#bdbdbd}
.dot.online{background:#25c26e}
.unread{background:#ef4444;color:#fff;border-radius:999px;padding:0 .35rem;font-size:.7rem;margin-left:6px}
.admin-badge{ background:#f5f5f5; color:#111; border:1px solid #e6e6e6; font-size:.65rem; padding:.1rem .4rem; border-radius:999px;}

/* RIGHT (Chat) */
.chat-pane{
  flex: 1 1 auto;
  min-width: 0;
  display:flex; flex-direction:column;
  background:#fff;
}
@media (min-width: 992px){
  .chat-pane{ min-width: var(--min-chat-w); }
}
.chat-head{
  display:flex; align-items:center; gap:8px; padding:10px 14px; background:#fff;
  position:sticky; top:0; z-index:1;
}
.chat-avatar{ width:32px;height:32px;border-radius:50%;display:grid;place-items:center;font-weight:700;background:#111;color:#fff;font-size:.85rem; }

/* Messages area */
.chat-scroll{
  flex:1 1 auto; min-width:0;
  overflow-y:auto; overflow-x:hidden;
  padding:16px; background:#f6f6f7;
}
.chat-scroll::-webkit-scrollbar{width:8px}
.chat-scroll::-webkit-scrollbar-thumb{background:#d4d4d4;border-radius:8px}
.bubble{
  max-width:72%;
  padding:.55rem .75rem;
  border-radius:18px;
  margin-bottom:12px;
  line-height:1.35; font-size:.95rem;
  white-space: normal; word-break: break-word;
}
.bubble .time{font-size:.72rem; color:#8d8d8d; margin-top:.22rem}
.bubble.them{background:#ffffff; border:1px solid #e9e9e9; color:#0a0a0a}
.bubble.me{background:#000; color:#fff; margin-left:auto}

/* Composer */
.composer{ position:relative; display:flex; align-items:center; gap:10px; padding:10px 12px; border-top:1px solid #e9e9e9; background:#fff; }
.btn-attach{ width:36px;height:36px;border:none;background:transparent;color:#6b7280;border-radius:8px; }
.compose-wrap{ position:relative; flex:1 1 auto; min-width:0; }
.compose-input{
  width:100%; height:44px; border-radius:999px; border:1px solid #e4e4e4;
  padding:0 56px 0 14px; outline:0; background:#fff; color:#0a0a0a; box-sizing:border-box;
}
.btn-send{
  position:absolute; right:6px; top:50%; transform:translateY(-50%);
  width:40px;height:40px;border-radius:50%; border:none; background:#111; color:#fff; display:grid; place-items:center;
}

/* Responsive Overrides */
@media (max-width: 991.98px){
  /* On mobile, make the window full screen */
  .techora-chat-window {
    width: 100vw;
    height: 100vh;
    bottom: 0;
    right: 0;
    border-radius: 0;
  }
  .techora-chat-layout.show-threads .chat-threads{
    flex: 1 1 auto !important;
    width: 100% !important;
    min-width: 0 !important;
    max-width: none !important;
  }
  .techora-chat-layout.show-chat .chat-threads{ display:none; }
  .techora-chat-layout.show-chat .chat-pane{ display:flex; }
  .techora-chat-layout.show-threads .chat-threads{ display:flex; }
  .techora-chat-layout.show-threads .chat-pane{ display:none; }
}
